Version 4
SHEET 1 2788 5112
WIRE -176 -224 -304 -224
WIRE -304 -160 -304 -224
WIRE -272 -160 -304 -160
WIRE 320 -160 320 -176
WIRE -176 -144 -176 -224
WIRE -176 -144 -208 -144
WIRE -80 -144 -176 -144
WIRE 16 -144 -16 -144
WIRE 64 -144 16 -144
WIRE 288 -144 64 -144
WIRE -272 -128 -352 -128
WIRE 448 -128 352 -128
WIRE 464 -128 448 -128
WIRE 288 -112 240 -112
WIRE -848 -96 -1296 -96
WIRE -240 -96 -240 -112
WIRE -1296 -80 -1296 -96
WIRE 16 -80 16 -144
WIRE 320 -80 320 -96
WIRE 240 -64 240 -112
WIRE -400 -16 -400 -32
WIRE -176 -16 -304 -16
WIRE 240 -16 240 -64
WIRE 320 -16 240 -16
WIRE 448 -16 448 -128
WIRE 448 -16 400 -16
WIRE -1296 16 -1296 0
WIRE -544 32 -544 0
WIRE -304 48 -304 -16
WIRE -272 48 -304 48
WIRE -176 64 -176 -16
WIRE -176 64 -208 64
WIRE -144 64 -176 64
WIRE 16 64 16 0
WIRE 16 64 -144 64
WIRE 128 64 16 64
WIRE 240 64 240 -16
WIRE 240 64 208 64
WIRE 272 64 240 64
WIRE 384 64 352 64
WIRE -400 80 -400 64
WIRE -272 80 -400 80
WIRE -400 96 -400 80
WIRE -1296 112 -1296 96
WIRE -240 112 -240 96
WIRE -544 144 -544 112
WIRE -400 192 -400 176
FLAG -544 144 0
FLAG -1296 192 0
FLAG -848 -96 v_in
FLAG -544 0 vcc
FLAG 320 -176 vcc
FLAG 320 -80 0
FLAG 464 -128 v_out
IOPIN 464 -128 Out
FLAG 64 -144 vac
FLAG -400 -32 vcc
FLAG -240 32 vcc
FLAG -240 112 0
FLAG -144 64 vref
FLAG 240 -64 vcomp
FLAG 384 64 vcc
FLAG -352 -128 v_in
IOPIN -352 -128 In
FLAG -240 -176 vcc
FLAG -240 -96 0
FLAG -400 192 0
SYMBOL voltage -544 16 R0
WINDOW 3 -38 55 Right 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 0 78 59 Right 2
SYMATTR Value {VCC}
SYMATTR InstName vcc
SYMBOL voltage -1296 -96 R0
WINDOW 0 -113 70 Bottom 2
WINDOW 3 47 58 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 93 56 VBottom 2
SYMATTR InstName PsuedoNoise
SYMATTR Value SFFM(0 {NOISE*VCC*0.015} 121 1 49)
SYMBOL voltage -1296 0 R0
WINDOW 0 -111 67 Bottom 2
WINDOW 3 49 57 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName AnalogInput
SYMATTR Value PULSE({VL} {VH} .25 0.025 0.5 0.05 {PERIOD})
SYMBOL voltage -1296 96 R0
WINDOW 0 -116 58 Left 2
WINDOW 3 45 57 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName Sweep
SYMATTR Value SINE({VCC*(1-TS)/2} {VCC*0.9*(0.9-TS)/2} .09)
SYMBOL res 32 16 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R1
SYMATTR Value 470k
SYMBOL cap -16 -160 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 10n
SYMBOL res -416 -32 R0
SYMATTR InstName R2
SYMATTR Value 10meg
SYMATTR SpiceLine tol=2 pwr=0.25
SYMBOL res -416 80 R0
SYMATTR InstName R3
SYMATTR Value 10meg
SYMATTR SpiceLine tol=2 pwr=0.25
SYMBOL SBORKA\\COMPARATOR\\TLV3491 320 -128 R0
WINDOW 38 12 37 Left 2
WINDOW 0 24 -26 Left 2
SYMATTR InstName U1
SYMBOL Opamps\\LT6004 -240 64 R0
SYMATTR InstName U2
SYMBOL res 224 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 330k
SYMBOL res 368 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 6.8meg
SYMBOL res 416 -32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 10meg
SYMBOL Opamps\\LT6004 -240 -144 R0
SYMATTR InstName U3
TEXT -1488 -240 Left 2 !.tran 0 15 150m uic\n.param VCC=2 PERIOD=1 TS=.2 NOISE=1\n.param VL=0 VH=VCC*TS
TEXT -1360 -112 Right 2 ;Test signal
TEXT -648 -112 Left 2 ;Power supply
TEXT -984 -232 Left 2 !;.step param NOISE LIST 0 1\n;.step param VCC LIST 2.0 3.6\n;.step param PERIOD LIST 2 0.2
TEXT -424 -256 Left 2 ;Voltage references
TEXT 120 -224 Left 2 ;Pulse detection
TEXT -88 -224 Left 2 ;AC couple
RECTANGLE Normal -1488 -128 -672 224
RECTANGLE Normal -448 224 -656 -128
RECTANGLE Normal -112 224 -432 -272
RECTANGLE Normal 560 -240 112 112
RECTANGLE Normal 96 -240 -96 112
