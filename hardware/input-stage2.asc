Version 4
SHEET 1 2788 5112
WIRE -352 -736 -352 -768
WIRE -128 -736 -128 -768
WIRE -352 -624 -352 -656
WIRE -128 -624 -128 -656
WIRE -128 -624 -352 -624
WIRE -32 -624 -128 -624
WIRE 128 -624 128 -656
WIRE 128 -624 -32 -624
WIRE 1648 -624 1648 -640
WIRE 1920 -608 1920 -624
WIRE 2192 -608 2128 -608
WIRE 2240 -608 2192 -608
WIRE 2352 -608 2320 -608
WIRE -32 -592 -32 -624
WIRE -352 -512 -352 -624
WIRE 1488 -512 1328 -512
WIRE 1648 -512 1648 -544
WIRE 1664 -512 1648 -512
WIRE 1776 -512 1744 -512
WIRE -352 -496 -352 -512
WIRE 592 -496 480 -496
WIRE 816 -496 672 -496
WIRE 1024 -496 864 -496
WIRE 1920 -496 1920 -528
WIRE 1936 -496 1920 -496
WIRE 2048 -496 2016 -496
WIRE 2128 -480 2128 -528
WIRE 1328 -416 1328 -512
WIRE 1392 -416 1328 -416
WIRE 544 -400 544 -416
WIRE 864 -400 864 -496
WIRE 928 -400 864 -400
WIRE 1488 -400 1488 -512
WIRE 1488 -400 1456 -400
WIRE 1536 -400 1488 -400
WIRE 1648 -400 1648 -512
WIRE 1648 -400 1616 -400
WIRE 1680 -400 1648 -400
WIRE 2192 -400 2192 -608
WIRE 2224 -400 2192 -400
WIRE -352 -384 -352 -432
WIRE 480 -384 480 -496
WIRE 512 -384 480 -384
WIRE 1024 -384 1024 -496
WIRE 1024 -384 992 -384
WIRE 1072 -384 1024 -384
WIRE 1200 -384 1072 -384
WIRE 1360 -384 1280 -384
WIRE 1392 -384 1360 -384
WIRE 1776 -384 1776 -512
WIRE 1776 -384 1744 -384
WIRE 1808 -384 1776 -384
WIRE 1920 -384 1920 -496
WIRE 1920 -384 1888 -384
WIRE 1952 -384 1920 -384
WIRE 2352 -384 2352 -608
WIRE 2352 -384 2288 -384
WIRE 2464 -384 2352 -384
WIRE 2512 -384 2464 -384
WIRE 640 -368 576 -368
WIRE 736 -368 720 -368
WIRE 816 -368 816 -496
WIRE 816 -368 800 -368
WIRE 928 -368 816 -368
WIRE 1680 -368 1648 -368
WIRE 2048 -368 2048 -496
WIRE 2048 -368 2016 -368
WIRE 2224 -368 2048 -368
WIRE 384 -352 48 -352
WIRE 512 -352 464 -352
WIRE 816 -352 816 -368
WIRE 1360 -352 1360 -384
WIRE 1952 -352 1920 -352
WIRE 2256 -336 2256 -352
WIRE 1648 -320 1648 -368
WIRE 1712 -320 1712 -352
WIRE 1424 -304 1424 -368
WIRE 1920 -304 1920 -352
WIRE 1984 -304 1984 -336
WIRE 544 -288 544 -336
WIRE 960 -288 960 -352
WIRE -352 -272 -352 -304
WIRE 1360 -256 1360 -272
WIRE 640 -224 480 -224
WIRE 192 -160 192 -208
WIRE 480 -160 480 -224
WIRE 544 -160 480 -160
WIRE -352 -144 -352 -192
WIRE 0 -144 -352 -144
WIRE 48 -144 48 -352
WIRE 48 -144 0 -144
WIRE 160 -144 48 -144
WIRE 192 -144 192 -160
WIRE 640 -144 640 -224
WIRE 640 -144 608 -144
WIRE 784 -144 640 -144
WIRE 944 -144 784 -144
WIRE 1024 -144 944 -144
WIRE 336 -128 224 -128
WIRE 544 -128 336 -128
WIRE 112 -112 48 -112
WIRE 160 -112 112 -112
WIRE 576 -48 576 -112
WIRE 784 -48 784 -64
WIRE 48 -32 48 -112
WIRE 48 -32 32 -32
WIRE 192 -32 192 -96
WIRE 48 64 48 -32
WIRE 48 64 32 64
WIRE 144 64 48 64
WIRE 336 64 336 -128
WIRE 336 64 224 64
FLAG -32 -592 0
FLAG -352 -768 vcc
FLAG 192 -208 VCC
FLAG 192 -32 0
FLAG 544 -288 0
FLAG 544 -416 VCC
FLAG 816 -288 0
FLAG 1072 -384 v_min
FLAG 0 -144 v_in
FLAG 944 -144 v_out
FLAG -48 -32 v_max
FLAG -48 64 v_min
FLAG 576 -176 vcc
FLAG 576 -48 0
FLAG 784 -48 0
FLAG 112 -112 v_comp
FLAG 960 -416 vcc
FLAG 960 -288 0
FLAG 1984 -400 vcc
FLAG 1984 -304 0
FLAG 2256 -416 vcc
FLAG 1920 -304 virtgnd
FLAG 2128 -480 0
FLAG 1920 -624 vos
FLAG 2464 -384 v_max
FLAG 128 -736 virtgnd
FLAG 1424 -432 vcc
FLAG 1424 -304 0
FLAG 1360 -256 0
FLAG 1712 -416 vcc
FLAG 1712 -320 0
FLAG 1648 -320 virtgnd
FLAG 1648 -640 virtgnd
FLAG 2256 -336 0
FLAG -128 -768 vos
DATAFLAG 1024 -144 ""
DATAFLAG 2512 -384 ""
SYMBOL voltage -352 -752 R0
WINDOW 3 -107 55 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 0 8 6 Left 2
SYMATTR Value {VCC}
SYMATTR InstName VCC
SYMBOL res 128 80 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R_feedback
SYMATTR Value 500k
SYMBOL res 48 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 100k
SYMBOL res -64 -16 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R4
SYMATTR Value 100k
SYMBOL voltage -352 -176 R180
WINDOW 0 -113 70 Bottom 2
WINDOW 3 47 58 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 93 56 VBottom 2
SYMATTR InstName PsuedoNoise
SYMATTR Value SFFM(0 0.025 173 3 53)
SYMBOL Comparators\\LT1017 192 -128 R0
SYMATTR InstName U1
SYMBOL schottky 800 -384 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D2
SYMATTR Value BAT54
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap 800 -352 R0
WINDOW 3 45 47 Left 2
SYMATTR Value 100n
SYMATTR InstName C2
SYMBOL res 688 -512 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 100k
SYMBOL res 480 -368 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 100k
SYMBOL res 768 -160 R0
SYMATTR InstName R5
SYMATTR Value 1meg
SYMBOL voltage -352 -288 R180
WINDOW 0 -111 67 Bottom 2
WINDOW 3 49 57 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName AnalogInput
SYMATTR Value PULSE({VL} {VH} .5 .01 .01 .001 {PERIOD})
SYMBOL voltage -352 -416 R180
WINDOW 0 -116 58 Left 2
WINDOW 3 45 57 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName Sweep
SYMATTR Value SINE({VCC*0.3} {VCC*0.3} .09)
SYMBOL res 1904 -400 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 100k
SYMBOL res 1936 -512 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R6
SYMATTR Value 100k
SYMBOL res 2032 -512 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 100k
SYMBOL voltage 128 -752 R0
WINDOW 3 -123 54 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value {VCC/2}
SYMATTR InstName V1
SYMBOL res 1296 -400 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 100k
SYMBOL res 1376 -256 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R17
SYMATTR Value 100k
SYMBOL res 1632 -416 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 100k
SYMBOL res 1664 -528 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R19
SYMATTR Value 100k
SYMBOL res 1760 -528 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20
SYMATTR Value 100k
SYMBOL res 2144 -512 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R15
SYMATTR Value 100k
SYMBOL res 2336 -624 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R21
SYMATTR Value 100k
SYMBOL voltage -128 -752 R0
WINDOW 3 -42 53 Right 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 0 77 12 Right 2
SYMATTR Value {VCC*.4}
SYMATTR InstName VOS1
SYMBOL res 736 -384 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 50k
SYMBOL Opamps\\LT6005 544 -368 R0
SYMATTR InstName U2
SYMBOL Opamps\\LT6005 576 -144 R0
SYMATTR InstName U3
SYMBOL Opamps\\LT6005 960 -384 R0
SYMATTR InstName U4
SYMBOL Opamps\\LT6005 1424 -400 R0
SYMATTR InstName U6
SYMBOL Opamps\\LT6005 1712 -384 R0
SYMATTR InstName U7
SYMBOL Opamps\\LT6005 1984 -368 R0
SYMATTR InstName U8
SYMBOL Opamps\\LT6005 2256 -384 R0
SYMATTR InstName U9
TEXT 408 -768 Left 2 !.tran 15  uic * startup\n.param TL=0.1 TH=0.3 VCC=1.8 PERIOD=1\n.param VL=VCC*TL VH=VCC*TH\n.step param VCC LIST 1.8 3.3\n.step param PERIOD LIST 2 0.2
TEXT -856 -512 Left 2 ;Test signal
TEXT -120 -384 Left 2 ;Pulse detection
TEXT 376 -560 Left 2 ;Minimum peak follower
TEXT 912 -224 Left 2 ;Output simulation
TEXT 2456 -712 Left 2 ;Summing amp
TEXT -744 -48 Left 5 ;LT6005 = MCP6044\nLT1017 = MCP6541
RECTANGLE Normal -144 -128 -864 -528
RECTANGLE Normal 352 -400 -128 112
RECTANGLE Normal 1120 -256 368 -576
RECTANGLE Normal 1120 -16 368 -240
RECTANGLE Normal 2632 -208 1136 -736
