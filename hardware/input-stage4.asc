Version 4
SHEET 1 2788 5112
WIRE -224 -112 -352 -112
WIRE -848 -96 -1296 -96
WIRE -1296 -80 -1296 -96
WIRE -352 -48 -352 -112
WIRE -320 -48 -352 -48
WIRE 480 -48 480 -80
WIRE -224 -32 -224 -112
WIRE -224 -32 -256 -32
WIRE -48 -32 -224 -32
WIRE 48 -32 16 -32
WIRE 112 -32 48 -32
WIRE 448 -32 112 -32
WIRE -320 -16 -400 -16
WIRE 624 -16 512 -16
WIRE 656 -16 624 -16
WIRE 448 0 368 0
WIRE -1296 16 -1296 0
WIRE -288 16 -288 0
WIRE 48 32 48 -32
WIRE -448 48 -544 48
WIRE 368 48 368 0
WIRE 480 48 480 16
WIRE -448 96 -448 48
WIRE -224 96 -352 96
WIRE 368 96 368 48
WIRE 496 96 368 96
WIRE 624 96 624 -16
WIRE 624 96 576 96
WIRE -1296 112 -1296 96
WIRE -624 160 -624 48
WIRE -352 160 -352 96
WIRE -320 160 -352 160
WIRE -224 176 -224 96
WIRE -224 176 -256 176
WIRE -192 176 -224 176
WIRE 48 176 48 112
WIRE 48 176 -192 176
WIRE 112 176 48 176
WIRE 256 176 112 176
WIRE 368 176 368 96
WIRE 368 176 336 176
WIRE 400 176 368 176
WIRE 512 176 480 176
WIRE -448 192 -448 176
WIRE -320 192 -448 192
WIRE -448 208 -448 192
WIRE -288 224 -288 208
WIRE -448 304 -448 288
FLAG 480 -80 vcc
FLAG 480 48 0
FLAG 656 -16 v_out
FLAG 112 -32 vac
FLAG -448 48 vcc
FLAG -448 304 0
FLAG -288 144 vcc
FLAG -288 224 0
FLAG -192 176 vref
FLAG 112 176 vref
FLAG -624 160 0
FLAG -1296 192 0
FLAG 368 48 vcomp
FLAG 512 176 vcc
FLAG -848 -96 v_in
FLAG -400 -16 v_in
FLAG -288 -64 vcc
FLAG -288 16 0
SYMBOL voltage -528 48 R90
WINDOW 3 -51 19 VRight 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 0 47 37 VRight 2
SYMATTR Value {VCC}
SYMATTR InstName vcc
SYMBOL voltage -1296 -96 R0
WINDOW 0 -113 70 Bottom 2
WINDOW 3 47 58 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 93 56 VBottom 2
SYMATTR InstName PsuedoNoise
SYMATTR Value SFFM(0 {NOISE*VCC*0.015} 121 1 49)
SYMBOL voltage -1296 0 R0
WINDOW 0 -111 67 Bottom 2
WINDOW 3 49 57 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName AnalogInput
SYMATTR Value PULSE({VL} {VH} .25 0.025 0.5 0.05 {PERIOD})
SYMBOL voltage -1296 96 R0
WINDOW 0 -116 58 Left 2
WINDOW 3 45 57 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName Sweep
SYMATTR Value SINE({VCC*(1-TS)/2} {VCC*(0.9-TS)/2} .09)
SYMBOL res 64 128 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R5
SYMATTR Value 470k
SYMBOL cap 16 -48 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 10n
SYMBOL res -464 80 R0
SYMATTR InstName R11
SYMATTR Value 330k
SYMATTR SpiceLine tol=2 pwr=0.25
SYMBOL res -464 192 R0
SYMATTR InstName R12
SYMATTR Value 330k
SYMATTR SpiceLine tol=2 pwr=0.25
SYMBOL SBORKA\\COMPARATOR\\TLV3491 480 -16 R0
WINDOW 38 12 37 Left 2
WINDOW 0 24 -26 Left 2
SYMATTR InstName U1
SYMBOL Opamps\\LT6004 -288 176 R0
SYMATTR InstName U2
SYMBOL res 352 160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 12k
SYMBOL res 496 160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 270k
SYMBOL res 592 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 330k
SYMBOL Opamps\\LT6004 -288 -32 R0
SYMATTR InstName U3
TEXT -648 -216 Left 2 !.tran 0 15 150m \n.param VCC=2 PERIOD=.2 TS=.25 NOISE=1\n.param VL=0 VH=VCC*TS
TEXT -1360 -112 Right 2 ;Test signal
TEXT -648 -104 Left 2 ;Power supply & reference
TEXT -1368 -224 Left 2 !;.step param NOISE LIST 0 1\n;.step param VCC LIST 2.0 3.6\n;.step param PERIOD LIST 2 0.2
TEXT 200 -104 Left 2 ;Pulse detection
TEXT -120 -112 Left 2 ;AC couple
RECTANGLE Normal -1488 -128 -672 224
RECTANGLE Normal -144 336 -656 -128
RECTANGLE Normal 736 -128 192 224
RECTANGLE Normal 176 -128 -128 224
